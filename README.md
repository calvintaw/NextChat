# Discord Clone


A full-stack Discord-inspired chat app built with [Next.js](https://nextjs.org/), [Tailwind CSS](https://tailwindcss.com/), [React](https://react.dev/), [postgres.js](https://github.com/porsager/postgres), and [Supabase](https://supabase.com/).


## Table of Contents

- [Features](#features)
- [Tech Stack](#tech-stack)
- [Getting Started](#getting-started)
- [Environment Variables](#environment-variables)
- [Project Structure](#project-structure)
- [Screenshots](#screenshots)
- [Flaws / Bugs](#flaws--bugs)
- [Notes](#notes)

---

## Features

- Instant messaging between users and servers (rooms)
- Authentication via Supabase and NextAuth.js
- Real-time database updates and online/offline status
- Dark mode
- CRUD operations for messages, servers, and users
- Message reactions
- Media uploads (images and attachments)
- Custom server creation
- User profile customization
- Terms of Service (placeholder)
- Play Tic-Tac-Toe with friends or the bot
- Built-in AI bot (calls DeepSeek through Hugging Face)

---

## Tech Stack

**Frontend:** Next.js (App Router), React, Tailwind CSS
**Backend:** Next.js API routes, postgres.js
**Database:** Supabase (PostgreSQL)
**Auth:** NextAuth.js, Supabase Auth

---

## Getting Started

### Prerequisites

- [Node.js](https://nodejs.org/) v18+
- [npm](https://www.npmjs.com/) or [yarn](https://yarnpkg.com/)
- A Supabase project with API keys

### Installation

```bash
git clone https://github.com/calvintaw/discord_clone.git
cd discord_clone
npm install
```

---

### Environment Variables

Create a `.env.local` file in the root folder and fill it out like this:

```env
AUTH_SECRET= # Added automatically by `npx auth`. Learn more: https://cli.authjs.dev

# GitHub login credentials for NextAuth.js
AUTH_GITHUB_ID=
AUTH_GITHUB_SECRET=

# Database and Supabase configuration
POSTGRES_URL=
POSTGRES_USER=
POSTGRES_HOST=
SUPABASE_JWT_SECRET=
POSTGRES_PRISMA_URL=
POSTGRES_PASSWORD=
POSTGRES_DATABASE=
SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
NEXT_PUBLIC_SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=
POSTGRES_URL_NON_POOLING=

# Node.js socket server URL
NEXT_PUBLIC_SOCKET_URL=

# Vercel environment variables
NEXTAUTH_SECRET=
NEXTAUTH_URL= # URL of your deployed site

# News API key (any free provider works)
NEWS_API_KEY=

# System/admin user details (used to reduce DB calls)
SYSTEM_USER_ID=
SYSTEM_USER_DISPLAY_NAME=
SYSTEM_USER_EMAIL=
SYSTEM_USER_IMAGE=
SYSTEM_USER_CREATED_AT=
SYSTEM_USER_USERNAME=
SYSTEM_CHATBOT_URL=
```

---

### Running Locally

```bash
npm run dev
```

Then open [http://localhost:3000](http://localhost:3000).

---

## Project Structure

```
app/
 ├── (auth)         # Auth pages (login, register, terms)
 ├── (root)         # Main app (chat, dashboard, discover, news, games)
 ├── api            # API routes (auth, theme, etc.)
 ├── lib            # Hooks, helpers, context, Supabase, etc.
 ├── ui             # UI components (chat, contact, form, news, sidebar)
 ├── globals.css    # Global styles
 ├── store.ts       # State management
 └── types.d.ts     # TypeScript types
```

---

## Screenshots

### Home Page

<img width="1315" height="653" alt="Home Page Screenshot" src="https://github.com/user-attachments/assets/be179c2d-6d9d-465b-8092-4cf03f29bcb5" />

### Chat Room

<img width="1316" height="648" alt="Chat Room Screenshot" src="https://github.com/user-attachments/assets/a7de3e11-1f8a-4a12-8c79-755e03290b66" />

### Servers

<img width="1314" height="647" alt="Servers Screenshot" src="https://github.com/user-attachments/assets/5acf766f-900c-4943-be37-3777af9a88a1" />

### Games

<img width="1316" height="657" alt="image" src="https://github.com/user-attachments/assets/267e5a3e-19a3-4014-9728-b623c2fdb3de" />

---

## Flaws

- No email verification
- No login rate limiting
- User IDs are visible in URLs (potential security issue)
- Server member counts (online/offline) are placeholders
- Some files contain multiple components
- Code is messy in places
- Friend request handling can desync if users act at the same time
- Spamming messages can cause duplicates or mismatches
- Editing multi-line messages collapses them into one line
- News feed shows static data (API only works when the project is running locally)
- Probably more that I haven’t noticed yet

Comments like `// generated by chatgpt` exist in some files.
That just means I didn’t write that part, I had ChatGPT generate it for me either because I couldn’t figure it out at the time or I was being lazy

---

## My thoughts

I worked on this project for about five months, not every day, but when I did, it was usually for more than five hours at a time.

Now that it’s mostly done, I have mixed feelings. It’s not some groundbreaking project; it’s basically another CRUD app with chat features. I don’t think it’s great, but I don’t hate it either, it’s somewhere in between.

I used ChatGPT for maybe around 5% of the project, mostly for SQL syntax or creating indexes. Later on, I started using it more when I got stuck, especially with React components and useEffects. At some point, I realized I was relying on it too much, and that’s not where I want to be.

My Next.js skills definitely improved, but my React fundamentals, or rather my logical thinking, still need work. I even failed to build a simple Snake game from scratch, ended up using code from a blog and patched it with ChatGPT’s help to make it work. I’m not exactly proud of that, but it is what it is.

Next up, I plan to add a **video chat** feature, probably in a month or two. This project has turned into a place where I experiment with everything I’ve wanted to try and learn.

That’s all for now.

---

Feedback is always welcomed :)
